"use strict";(self.webpackChunkgkaucha_github_io=self.webpackChunkgkaucha_github_io||[]).push([[8262],{9467:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var s=r(5893),i=r(1151);const t={sidebar_position:3},o="Processor and Assembly Language",a={id:"Programming/processor-and-assembly-language",title:"Processor and Assembly Language",description:"Program Overview",source:"@site/docs/Programming/processor-and-assembly-language.md",sourceDirName:"Programming",slug:"/Programming/processor-and-assembly-language",permalink:"/docs/Programming/processor-and-assembly-language",draft:!1,unlisted:!1,editUrl:"https://github.com/gkaucha/gkaucha.github.io/tree/main/docs/docs/Programming/processor-and-assembly-language.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Fundamental Programming Concepts",permalink:"/docs/Programming/fundamental-programming-concepts"},next:{title:"More on Basics of Programming",permalink:"/docs/Programming/more-on-basics-of-programming"}},c={},l=[{value:"Program Overview",id:"program-overview",level:3},{value:"What does an executable binary look like?",id:"what-does-an-executable-binary-look-like",level:4},{value:"The x86 Processor",id:"the-x86-processor",level:3},{value:"Assembly Language",id:"assembly-language",level:3}];function d(e){const n={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"processor-and-assembly-language",children:"Processor and Assembly Language"}),"\n",(0,s.jsx)(n.h3,{id:"program-overview",children:"Program Overview"}),"\n",(0,s.jsx)(n.p,{children:"Let's write a simple source code in C."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'//program name firstcode.c\n#include<stdio.h>\n\nint main()\n{\n int i;\n for(i=0; i<5; i++)\n {\n   puts("Hello, World!\\n");\n }\n return 0;\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:'The above C-source code needs to be compiled to an executable binary file that the CPU can understand.\nLet\'s compile the source code with gcc compiler to ouput the file as "first_binary_program".'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ gcc firstprogram.c -o first_binary_program\n$ ls -al first_binary_program\n"})}),"\n",(0,s.jsx)(n.p,{children:'The "first_binary_program" binary instructions is written in machine language.'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The compiler translates the language of C code into machine language for a variety of processor architecutres like ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"x86"})}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Each architecture has a different machine language"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"what-does-an-executable-binary-look-like",children:"What does an executable binary look like?"}),"\n",(0,s.jsxs)(n.p,{children:["We can use ",(0,s.jsx)(n.strong,{children:"objdump"})," program provided on GNU development tools, to examine complied binaries.\nLet's look how the main() function was translated into the machine code."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ objdump -D first_binary_program | grep -A20  main.:\n0000000000001149 <main>:\n    1149:\tf3 0f 1e fa          \tendbr64 \n    114d:\t55                   \tpush   %rbp\n    114e:\t48 89 e5             \tmov    %rsp,%rbp\n    1151:\t48 83 ec 10          \tsub    $0x10,%rsp\n    1155:\tc7 45 fc 00 00 00 00 \tmovl   $0x0,-0x4(%rbp)\n    115c:\teb 13                \tjmp    1171 <main+0x28>\n    115e:\t48 8d 05 9f 0e 00 00 \tlea    0xe9f(%rip),%rax        # 2004 <_IO_stdin_used+0x4>\n    1165:\t48 89 c7             \tmov    %rax,%rdi\n    1168:\te8 e3 fe ff ff       \tcall   1050 <puts@plt>\n    116d:\t83 45 fc 01          \taddl   $0x1,-0x4(%rbp)\n    1171:\t83 7d fc 09          \tcmpl   $0x9,-0x4(%rbp)\n    1175:\t7e e7                \tjle    115e <main+0x15>\n    1177:\tb8 00 00 00 00       \tmov    $0x0,%eax\n    117c:\tc9                   \tleave  \n    117d:\tc3                   \tret \n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Output of OBJDUMP",type:"info",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"A20 : filters the output to only display 20 lines after regular expression main.:"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"First column"})," : ",(0,s.jsx)(n.strong,{children:"1149"}),", ",(0,s.jsx)(n.strong,{children:"114d"}),".. the hexadecimal numbers are ",(0,s.jsx)(n.strong,{children:"memory addresses"}),"; collection of bytes of temporary storage space where bits of machine language instrucitons are stored."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Second column"})," : ",(0,s.jsx)(n.strong,{children:"f3 0f 1e fa"})," ... the hexadecimal bytes are the Operation Codes (Op codes); represents specific machine-level instructions that CPU can execute."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Third column"})," : ",(0,s.jsx)(n.strong,{children:"push"}),", ",(0,s.jsx)(n.strong,{children:"mov"})," .. these are assembly language; collection of mnemonics for the corresponding machine language instructions. For example: ",(0,s.jsx)(n.strong,{children:"ret"}),' instruction(short for "return") is easier to remember than ',(0,s.jsx)(n.strong,{children:"c3"})," or ",(0,s.jsx)(n.strong,{children:"11000011"}),"."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Fourth column"})," : ",(0,s.jsx)(n.strong,{children:"%rsp, %rbp"})," .. these are regsiters like stack pointer register(rsp), base pointer register(bsp). Also includes immediate value, memory addressess."]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Processors have their own set of variables called ",(0,s.jsx)(n.strong,{children:"registers"}),". The instructions use these registers to read or write data."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"the-x86-processor",children:"The x86 Processor"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.em,{children:"x86"})," processor has several registers.\nWe can use ",(0,s.jsx)(n.em,{children:"debugger"})," tool called ",(0,s.jsx)(n.em,{children:"GDB"}),", included in GNU development tools, to step through compiled programs, examine program memory, and view processor registers."]}),"\n",(0,s.jsx)(n.p,{children:"Let's inspect through our compiled program using the GDB debugger."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'$ gdb -q ./first_binary_program\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".\n\nBreakpoint 1, 0x0000555555555151 in main ()\n(gdb) info registers\nrax            0x555555555149      93824992235849\nrbx            0x0                 0\nrcx            0x555555557dc0      93824992247232\nrdx            0x7fffffffde48      140737488346696\nrsi            0x7fffffffde38      140737488346680\nrdi            0x1                 1\nrbp            0x7fffffffdd20      0x7fffffffdd20\nrsp            0x7fffffffdd20      0x7fffffffdd20\nr8             0x7ffff7f95f10      140737353703184\nr9             0x7ffff7fc9040      140737353912384\nr10            0x7ffff7fc3908      140737353890056\nr11            0x7ffff7fde6c0      140737354000064\nr12            0x7fffffffde38      140737488346680\nr13            0x555555555149      93824992235849\nr14            0x555555557dc0      93824992247232\nr15            0x7ffff7ffd040      140737354125376\n--Type <RET> for more, q to quit, c to continue without paging--\nrip            0x555555555151      0x555555555151 <main+8>\neflags         0x246               [ PF ZF IF ]\ncs             0x33                51\nss             0x2b                43\nds             0x0                 0\nes             0x0                 0\nfs             0x0                 0\ngs             0x0                 0\nk0             0x40004000          1073758208\nk1             0x2200000           35651584\nk2             0x0                 0\nk3             0x0                 0\nk4             0x0                 0\nk5             0x0                 0\nk6             0x0                 0\nk7             0x0                 0\n(gdb) quit\nA debugging session is active.\n\n\tInferior 1 [process 598254] will be killed.\n\nQuit anyway? (y or n) y\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"breakdown of debugger exectuion",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"first we set a breakpoint on the main() function so exection will stop right before the code is executed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'GDB runs the program and stops at the breakpoint, and with "info registers", displays all the processoer registers and their current states.'}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The first four registers (rax,rbx,rcx,rdx) are general-purpose registers called ",(0,s.jsx)(n.em,{children:"Accumulator"}),", ",(0,s.jsx)(n.em,{children:"Base"}),", ",(0,s.jsx)(n.em,{children:"Counter"})," and ",(0,s.jsx)(n.em,{children:"Data"})," registers respectively. ",(0,s.jsx)(n.strong,{children:"Mainly used as temporary variables for the CPU while executing instructions."})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The second four registers(rsi,rdi,rbp,rsp) are also general purpose resiters, but also known as ",(0,s.jsx)(n.strong,{children:"Pointers"})," and ",(0,s.jsx)(n.strong,{children:"Indexes"}),". They stand for ",(0,s.jsx)(n.em,{children:"Source Index"}),", ",(0,s.jsx)(n.em,{children:"Destination Index"}),", ",(0,s.jsx)(n.em,{children:"Base Pointer"})," and ",(0,s.jsx)(n.em,{children:"Stack Pointer"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pointers"})," beacause they store 32-bit addresses, which point to that location in memory. Important to program execution and memory management."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Indexes"})," are technically pointers, commonly used to point to the source and destination when data  needs to be read from or written to. There are load and store instructions that use these registers."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.em,{children:"rip"})," register is the ",(0,s.jsx)(n.strong,{children:"Instruction Pointer"})," register. It points to the current instruction the processor is reading. Currently, it points to the memory address at ",(0,s.jsx)(n.em,{children:"0x555555555151"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The other ",(0,s.jsx)(n.em,{children:"eflags"})," register consists of several bigt flags that are used for comparisons and memory segmentations. These registers keep track of different segments, the acual memory has been split to."]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.h3,{id:"assembly-language",children:"Assembly Language"})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>o});var s=r(7294);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);